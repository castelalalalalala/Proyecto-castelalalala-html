<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Escribir algo</title>
    <style>
        body{font-family:system-ui,Arial,Helvetica,sans-serif;margin:2rem}
        h1{margin-bottom:.5rem}
        textarea{width:100%;height:60vh;padding:1rem;font-size:1rem;box-sizing:border-box;resize:vertical}
        .controls{margin-top:.5rem;display:flex;gap:.5rem;align-items:center}
        button{padding:.5rem .75rem}
        #status{color:#666;font-size:.9rem;margin-left:.5rem}
    </style>
</head>
<body>
    <h1>Escribir algo</h1>
    <textarea id="editor" placeholder="Escribe aquí..."></textarea>
    <div class="controls">
        <button id="save">Guardar</button>
        <button id="clear">Borrar</button>
        <button id="export">Exportar .txt</button>
        <span id="status"></span>
    </div>

    <script>
        const KEY = 'nota';
        const editor = document.getElementById('editor');
        const status = document.getElementById('status');

        function showStatus(text){
            status.textContent = text;
            setTimeout(()=> status.textContent = '', 1500);
        }

        // Cargar al iniciar
        window.addEventListener('load', ()=> {
            const v = localStorage.getItem(KEY);
            if(v) editor.value = v;
        });

        // Guardar manual
        document.getElementById('save').addEventListener('click', ()=>{
            localStorage.setItem(KEY, editor.value);
            showStatus('Guardado');
        });

        // Borrar
        document.getElementById('clear').addEventListener('click', ()=>{
            if(!confirm('¿Borrar el contenido?')) return;
            editor.value = '';
            localStorage.removeItem(KEY);
            showStatus('Borrado');
        });

        // Exportar como .txt
        document.getElementById('export').addEventListener('click', ()=>{
            const blob = new Blob([editor.value], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'nota.txt';
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        });

        // Autoguardado (debounce 5s)
        let autosaveTimer;
        editor.addEventListener('input', ()=>{
            clearTimeout(autosaveTimer);
            autosaveTimer = setTimeout(()=>{
                localStorage.setItem(KEY, editor.value);
                showStatus('Autoguardado');
            }, 5000);
        });
    </script>
</body>
</html></div>